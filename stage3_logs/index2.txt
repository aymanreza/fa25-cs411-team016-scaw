--------------
DROP INDEX idx_weather_loc ON weather_observations
--------------

ERROR 1553 (HY000): Cannot drop index 'idx_weather_loc': needed in a foreign key constraint
Query OK, 0 rows affected (0.076 sec)
Records: 0  Duplicates: 0  Warnings: 0

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| EXPLAIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| -> Sort: state, city, observed_on, `event`  (cost=1674..1674 rows=785) (actual time=1.12..1.13 rows=120 loops=1)
    -> Table scan on <union temporary>  (cost=829..842 rows=785) (actual time=1.05..1.07 rows=120 loops=1)
        -> Union materialize with deduplication  (cost=829..829 rows=785) (actual time=1.05..1.05 rows=120 loops=1)
            -> Nested loop inner join  (cost=128 rows=118) (actual time=0.185..0.26 rows=118 loops=1)
                -> Index range scan on w using idx_weather_tmax over (35 <= tmax_c), with index condition: (w.tmax_c >= 35)  (cost=53.4 rows=118) (actual time=0.174..0.188 rows=118 loops=1)
                -> Single-row index lookup on l using PRIMARY (location_id=w.location_id)  (cost=0.531 rows=1) (actual time=412e-6..442e-6 rows=1 loops=118)
            -> Nested loop inner join  (cost=312 rows=333) (actual time=0.346..0.346 rows=0 loops=1)
                -> Filter: (w.tmin_c <= 0)  (cost=102 rows=333) (actual time=0.345..0.345 rows=0 loops=1)
                    -> Table scan on w  (cost=102 rows=1000) (actual time=0.0481..0.277 rows=1000 loops=1)
                -> Single-row index lookup on l using PRIMARY (location_id=w.location_id)  (cost=0.53 rows=1) (never executed)
            -> Nested loop inner join  (cost=312 rows=333) (actual time=0.0921..0.369 rows=2 loops=1)
                -> Filter: (w.precip_mm >= 50)  (cost=102 rows=333) (actual time=0.0888..0.364 rows=2 loops=1)
                    -> Table scan on w  (cost=102 rows=1000) (actual time=0.0303..0.293 rows=1000 loops=1)
                -> Single-row index lookup on l using PRIMARY (location_id=w.location_id)  (cost=0.53 rows=1) (actual time=0.00236..0.00239 rows=1 loops=2)
 |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.003 sec)

Query OK, 0 rows affected (0.027 sec)
Records: 0  Duplicates: 0  Warnings: 0

Query OK, 0 rows affected (0.053 sec)
Records: 0  Duplicates: 0  Warnings: 0

+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| EXPLAIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| -> Sort: state, city, observed_on, `event`  (cost=1398..1398 rows=669) (actual time=0.861..0.867 rows=120 loops=1)
    -> Table scan on <union temporary>  (cost=692..703 rows=669) (actual time=0.804..0.818 rows=120 loops=1)
        -> Union materialize with deduplication  (cost=692..692 rows=669) (actual time=0.803..0.803 rows=120 loops=1)
            -> Nested loop inner join  (cost=312 rows=333) (actual time=0.0474..0.409 rows=118 loops=1)
                -> Filter: (w.tmax_c >= 35)  (cost=102 rows=333) (actual time=0.0375..0.349 rows=118 loops=1)
                    -> Table scan on w  (cost=102 rows=1000) (actual time=0.0355..0.278 rows=1000 loops=1)
                -> Single-row index lookup on l using PRIMARY (location_id=w.location_id)  (cost=0.53 rows=1) (actual time=315e-6..344e-6 rows=1 loops=118)
            -> Nested loop inner join  (cost=312 rows=333) (actual time=0.291..0.291 rows=0 loops=1)
                -> Filter: (w.tmin_c <= 0)  (cost=102 rows=333) (actual time=0.291..0.291 rows=0 loops=1)
                    -> Table scan on w  (cost=102 rows=1000) (actual time=0.0373..0.23 rows=1000 loops=1)
                -> Single-row index lookup on l using PRIMARY (location_id=w.location_id)  (cost=0.53 rows=1) (never executed)
            -> Nested loop inner join  (cost=2.42 rows=2) (actual time=0.0131..0.016 rows=2 loops=1)
                -> Index range scan on w using idx_weather_precip over (50 <= precip_mm), with index condition: (w.precip_mm >= 50)  (cost=1.16 rows=2) (actual time=0.00901..0.0101 rows=2 loops=1)
                -> Single-row index lookup on l using PRIMARY (location_id=w.location_id)  (cost=0.58 rows=1) (actual time=0.0025..0.00253 rows=1 loops=2)
 |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.003 sec)

Query OK, 0 rows affected (0.026 sec)
Records: 0  Duplicates: 0  Warnings: 0

